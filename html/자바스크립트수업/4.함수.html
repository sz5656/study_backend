<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Function</title>
  <style>
    table {
      border: 3px solid black;
      border-collapse: collapse;
      td {
        border: 1px solid #ccc;
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <script>
    // 함수 : 특정 기능을 하는 명령 모음(덩어리)
    // 함수 선언 : 기능 1에서 n까지 합
    function sum(n) {
      let sum = 0;
      for(let i = 1; i <= n; i++) {
        sum += i;
      }
      return sum;
    }
    let n = prompt("숫자 입력",5);
    console.log(`1~${n}까지의 합은 ${sum(n)} 입니다`);

    // 두 수를 입력 받아서 더하고, 뺀 값을 출력 하는 함수
    function pb(su1, su2) {
      console.log(`더한 값 : ${su1 + su2}`);
      console.log(`뺀 값 : ${su1 - su2}`);      
    }
    pb(4,5);

    // 1에서 n줄까지 별찍기
    // 1이면 1개 ~n이면 n개의 별 출력
    let starN = prompt("별 줄은 몇줄?",9);
    function star(starN) {
      let stars = '';
      for(let i = 1; i <= starN; i++) {
        for(let j = 1; j <= i; j++) {
          stars += `*`;
          document.write(`*`);
        }
        stars += `\n`;
        document.write(`<br>`);
      }
      console.log(stars);
    }
    star(starN);

    // n*m 표만들기
    let tableN = prompt("표의 행",3);
    let tableM = prompt("표의 열",4);
    function makeTable(tableN,tableM) {
      let layout = `<h1>${tableN}:${tableM}테이블</h1><table>`;
      for(let i = 1; i <= tableN; i++) {
        layout += `<tr>`;
        for(let j = 1; j <= tableM; j++) {
          layout += `<td> </td>`
        }
        layout += `</tr>`;
      }
      layout += `</table>`;
      document.write(layout);
    }
    makeTable(tableN,tableM);
    function makeTable2() {
      let tableN = prompt("표의 행",5);
      let tableM = prompt("표의 열",6);
      let layout = `<h1>${tableN}:${tableM}테이블</h1><table>`;
      for(let i = 1; i <= tableN; i++) {
        layout += `<tr>`;
        for(let j = 1; j <= tableM; j++) {
          layout += `<td> </td>`
        }
        layout += `</tr>`;
      }
      layout += `</table>`;
      document.write(layout);
    }
    makeTable2();

    a = 0; // 전역변수
    var a1 = 0; // 전역변수
    let a2 = 0; // script변수
    const a3 = 0; // script변수

    // 익명함수 : 이름이 없는 함수
    // 변수에 저장해서 사용 -> 변수명이 함수명이 된다.
    // 선언된 후에만 사용 가능하다
    // console.log(noName(1,2)); 오류발생
    let noName = function(a,b) {
      return a + b;
    }
    console.log(noName(2,3));

    // 즉시 실행 함수
    let val =(function() {
      return "즉시 실행 함수";
    })();
    console.log(val);

    // 화살표 함수 (익명함수에만 가능함)
    const hi = () => "안녕하세요";
    console.log(hi);

    // 콜백함수 : 다른함수의 값으로 전달되는 함수
    // 일이 순차적으로 실행되어야 하는 경우
    // 커피 주문하기
    function order(coffee, callback) {
      console.log(`${coffee} 주문 접수`);
      setTimeout(() => {
        callback(coffee) // ()안의 내용을 전달
      }, 3000); // 시간지연함수 (, n/1000초)
    }
    // 커피 준비 완료
    function done(coffee) {
      console.log(`${coffee} 준비 완료`);
    }

    order("아메리카노", done);
    order("복아", done);
    order("다방커피", done);
    order("아이스티", done);

    // 재귀함수 : 자기 자신을 호출하는 함수
    // 팩토리얼
    function fact(n){
      if(n == 1) return 1;
      else {
        return n * fact(n-1);
      }
    }
    console.log(fact(100));

    // 리턴값으로 함수를 리턴함
    function returnFunction() {
      let output = `리턴함수 테스트`;
      return function() {
        console.log(output);
      }
    }
  
    let result = returnFunction();
    console.log(result); // 리턴된 함수 자체
    console.log(result()); // 리턴된 함수의 함수호출
    // console.log(output); 오류 발생

    // 클로저
    // 만들어진 시점의 실행환경을 기억하는 함수
    // 자유변수가 저장되는 공간
    let increse = function() {
      let num = 0;
      return ++num;
    }
    console.log(increse());
    console.log(increse());
    console.log(increse());
    
    // 클로저
    let increse2 = function() {
      let num = 0;
      return function() {
        return ++num;
      }
    }(); // 즉시실행함수 붙여주기

    console.log(increse2());
    console.log(increse2());
    console.log(increse2());

    // 펼침연산자 ...(펼침연산자)
    let arr = [1,2,3,4,5,6,7,8,9,10];
    function hap(x, y, ...remain) {
      let sum = (x + y);
      for(let i = 0; i < arr.length; i++) {
        sum += arr[i];
      }
      return sum;
    }
    result = hap(...arr); // 배열에서 필요한 변수만큼을 제외하고 나머지를 펼침연산자에서 가지고있음
    console.log(`function hap -> ${result}`);

    // 변수의 scope(유효범위)
  </script>
</body>
</html>